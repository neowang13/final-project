"function"!==typeof window.DIL&&(window.DIL=function(b,e){var g=[],d,m;b!==Object(b)&&(b={});var k,l,x,w,u,v,n,B,q,J,K,D;k=b.partner;l=b.containerNSID;x=!!b.disableDestinationPublishingIframe;w=b.iframeAkamaiHTTPS;u=b.mappings;v=b.uuidCookie;n=!0===b.enableErrorReporting;B=b.visitorService;q=b.declaredId;J=!0===b.removeFinishedScriptsAndCallbacks;K=!0===b.delayAllUntilWindowLoad;D=!0===b.disableIDSyncs;var L,M,N,G,E,O,P,Q;L=!0===b.disableScriptAttachment;M=!0===b.disableCORSFiring;N=!0===b.disableDefaultRequest;
G=b.afterResultForDefaultRequest;E=b.dpIframeSrc;O=!0===b.testCORS;P=!0===b.useJSONPOnly;Q=b.visitorConstructor;n&&DIL.errorModule.activate();var R=!0===window._dil_unit_tests;(d=e)&&g.push(d+"");if(!k||"string"!==typeof k)return d="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:d,filename:"dil.js"}),Error(d);d="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(l||"number"===typeof l)l=parseInt(l,10),
!isNaN(l)&&0<=l&&(d="");d&&(l=0,g.push(d),d="");m=DIL.getDil(k,l);if(m instanceof DIL&&m.api.getPartner()===k&&m.api.getContainerNSID()===l)return m;if(this instanceof DIL)DIL.registerDil(this,k,l);else return new DIL(b,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner \x3d "+k+" and containerNSID \x3d "+l);var A={IS_HTTPS:"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},
H={stuffed:{}},r={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:l+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+
"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,instance:null,releaseType:"no VisitorAPI",admsProcessingStarted:!1,process:function(a){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var c=this,f,h,b,y,d;if("function"===typeof a&&"function"===typeof a.getInstance){if(B===Object(B)&&(f=B.namespace)&&"string"===typeof f)h=a.getInstance(f,{idSyncContainerID:l});
else{this.releaseType="no namespace";this.releaseRequests();return}if(h===Object(h)&&"function"===typeof h.isAllowed&&"function"===typeof h.getMarketingCloudVisitorID&&"function"===typeof h.getCustomerIDs){if(!h.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=h;b=function(a){"VisitorAPI"!==c.releaseType&&(c.mid=a,c.releaseType="VisitorAPI",c.releaseRequests())};if(R&&(y=B.server)&&"string"===typeof y)h.server=y;d=h.getMarketingCloudVisitorID(b);if("string"===
typeof d&&d.length){b(d);return}setTimeout(function(){"VisitorAPI"!==c.releaseType&&(c.releaseType="timeout",c.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(g){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var a=
t.isPopulatedString,c=this.getMarketingCloudVisitorID();if(!a(this.mid)||this.mid!==c)this.mid=c;return a(this.mid)?"d_mid\x3d"+this.mid+"\x26":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(a){if(a===Object(a)){var c="",f=[],h=[],b,y;for(b in a)a.hasOwnProperty(b)&&(h[0]=b,y=a[b],y===Object(y)&&(h[1]=y.id||"",h[2]=y.authState||0,f.push(h),h=[]));if(h=f.length)for(a=0;a<h;a++)c+="\x26d_cid_ic\x3d"+f[a].join("%01");return c}return""}},
declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(a,c){var f=t.isPopulatedString,h=encodeURIComponent;if(a===Object(a)&&f(c)){var b=a.dpid,y=a.dpuuid,d=null;if(f(b)&&f(y)){d=h(b)+"$"+h(y);if(!0===this.declaredIdCombos[d])return"setDeclaredId: combo exists for type '"+c+"'";this.declaredIdCombos[d]=!0;this.declaredId[c]={dpid:b,dpuuid:y};return"setDeclaredId: succeeded for type '"+c+"'"}}return"setDeclaredId: failed for type '"+c+"'"},getDeclaredIdQueryString:function(){var a=
this.declaredId.request,c=this.declaredId.init,f="";null!==a?f="\x26d_dpid\x3d"+a.dpid+"\x26d_dpuuid\x3d"+a.dpuuid:null!==c&&(f="\x26d_dpid\x3d"+c.dpid+"\x26d_dpuuid\x3d"+c.dpuuid);return f}},registerRequest:function(a){var c=this.firingQueue;a===Object(a)&&c.push(a);if(!this.firing&&(c.length&&(!K||DIL.windowLoaded))&&this.adms.calledBack)if(a=c.shift(),a.src=a.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid\x3d"),t.isPopulatedString(a.corsPostData)&&
(a.corsPostData=a.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid\x3d")),C.fireRequest(a),!this.firstRequestHasFired&&("script"===a.tag||"cors"===a.tag))this.firstRequestHasFired=!0},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(a){if(!J)return"removeFinishedScriptsAndCallbacks is not boolean true";var c=this.toRemove,f,h;a===Object(a)&&(f=a.script,h=a.callbackName,(f===Object(f)&&"SCRIPT"===f.nodeName||"no script created"===f)&&("string"===
typeof h&&h.length)&&c.push(a));if(this.readyToRemove&&c.length){h=c.shift();f=h.script;h=h.callbackName;"no script created"!==f?(a=f.src,f.parentNode.removeChild(f)):a=f;window[h]=null;try{delete window[h]}catch(b){}this.removed.push({scriptSrc:a,callbackName:h});DIL.variables.scriptsRemoved.push(a);DIL.variables.callbacksRemoved.push(h);return this.requestRemoval()}return"requestRemoval() processed"}};m=function(){var a="http://fast.",c="?d_nsid\x3d"+l+"#"+encodeURIComponent(document.location.href);
if("string"===typeof E&&E.length)return E+c;A.IS_HTTPS&&(a=!0===w?"https://fast.":"https://");return a+k+".demdex.net/dest5.html"+c};var z={THROTTLE_START:3E4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+k+"_"+l,url:m(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonProcessed:[],newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function a(){h=
document.createElement("iframe");h.id=f.id;h.style.cssText="display: none; width: 0; height: 0;";h.src=f.url;f.newIframeCreated=!0;c();document.body.appendChild(h)}function c(){s.addListener(h,"load",function(){h.className="aamIframeLoaded";f.iframeHasLoaded=!0;f.requestToProcess()})}var f=this,h=document.getElementById(this.id);h?"IFRAME"!==h.nodeName?(this.id+="_2",this.iframeIdChanged=!0,a()):(this.newIframeCreated=!1,"aamIframeLoaded"!==h.className?(this.originalIframeHasLoadedAlready=!1,c()):
(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.requestToProcess())):a();this.iframe=h},requestToProcess:function(a,c){var f=this;a&&!t.isEmptyObject(a)&&this.process(a,c);this.iframeHasLoaded&&(this.messages.length&&!this.sendingMessages)&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){f.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(a,c){var f=encodeURIComponent,
h,b,d,g,e,k;c===Object(c)&&(k=s.encodeAndBuildRequest(["",c.dpid||"",c.dpuuid||""],","));if((h=a.dests)&&h instanceof Array&&(b=h.length))for(d=0;d<b;d++)g=h[d],g=[f("dests"),f(g.id||""),f(g.y||""),f(g.c||"")],this.addMessage(g.join("|"));if((h=a.ibs)&&h instanceof Array&&(b=h.length))for(d=0;d<b;d++)g=h[d],g=[f("ibs"),f(g.id||""),f(g.tag||""),s.encodeAndBuildRequest(g.url||[],","),f(g.ttl||""),"",k],this.addMessage(g.join("|"));if((h=a.dpcalls)&&h instanceof Array&&(b=h.length))for(d=0;d<b;d++)g=
h[d],e=g.callback||{},e=[e.obj||"",e.fn||"",e.key||"",e.tag||"",e.url||""],g=[f("dpm"),f(g.id||""),f(g.tag||""),s.encodeAndBuildRequest(g.url||[],","),f(g.ttl||""),s.encodeAndBuildRequest(e,","),k],this.addMessage(g.join("|"));this.jsonProcessed.push(a)},addMessage:function(a){var c=encodeURIComponent,c=n?c("---destpub-debug---"):c("---destpub---");this.messages.push(c+a)},sendMessages:function(){var a=this,c;this.messages.length?(c=this.messages.shift(),DIL.xd.postMessage(c,this.url,this.iframe.contentWindow),
this.messagesPosted.push(c),setTimeout(function(){a.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},I={traits:function(a){t.isValidPdata(a)&&(r.sids instanceof Array||(r.sids=[]),s.extendArray(r.sids,a));return this},pixels:function(a){t.isValidPdata(a)&&(r.pdata instanceof Array||(r.pdata=[]),s.extendArray(r.pdata,a));return this},logs:function(a){t.isValidLogdata(a)&&(r.logdata!==Object(r.logdata)&&(r.logdata={}),s.extendObject(r.logdata,a));return this},customQueryParams:function(a){t.isEmptyObject(a)||
s.extendObject(r,a,p.reservedKeys);return this},signals:function(a,c){var f,h=a;if(!t.isEmptyObject(h)){if(c&&"string"===typeof c)for(f in h={},a)a.hasOwnProperty(f)&&(h[c+f]=a[f]);s.extendObject(r,h,p.reservedKeys)}return this},declaredId:function(a){p.declaredId.setDeclaredId(a,"request");return this},result:function(a){"function"===typeof a&&(r.callback=a);return this},afterResult:function(a){"function"===typeof a&&(r.postCallbackFn=a);return this},useImageRequest:function(){r.useImageRequest=
!0;return this},clearData:function(){r={};return this},submit:function(){C.submitRequest(r);r={};return this},getPartner:function(){return k},getContainerNSID:function(){return l},getEventLog:function(){return g},getState:function(){var a={},c={};s.extendObject(a,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});s.extendObject(c,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:r,otherRequestInfo:a,destinationPublishingInfo:c}},idSync:function(a){if(D)return"Error: id syncs have been disabled";
if(a!==Object(a)||"string"!==typeof a.dpid||!a.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof a.url||!a.url.length)return"Error: config.url is empty";var c=a.url,f=a.minutesToLive,h=encodeURIComponent,b,c=c.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof f)f=20160;else if(f=parseInt(f,10),isNaN(f)||0>=f)return"Error: config.minutesToLive needs to be a positive number";b=s.encodeAndBuildRequest(["",a.dpid,a.dpuuid||""],",");a=["ibs",h(a.dpid),"img",
h(c),f,"",b];z.addMessage(a.join("|"));p.firstRequestHasFired&&z.requestToProcess();return"Successfully queued"},aamIdSync:function(a){if(D)return"Error: id syncs have been disabled";if(a!==Object(a)||"string"!==typeof a.dpuuid||!a.dpuuid.length)return"Error: config or config.dpuuid is empty";a.url="//dpm.demdex.net/ibs:dpid\x3d"+a.dpid+"\x26dpuuid\x3d"+a.dpuuid;return this.idSync(a)},passData:function(a){if(t.isEmptyObject(a))return"Error: json is empty or not an object";z.ibsDeleted.push(a.ibs);
delete a.ibs;C.defaultCallback(a);return a},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var a=p,c=a.modStatsParams,f=a.platformParams,h;if(!c){c={};for(h in f)f.hasOwnProperty(h)&&!a.nonModStatsParams[h]&&(c[h.replace(/^d_/,"")]=f[h]);a.modStatsParams=c}return c}},C={corsMetadata:function(){var a="none",c=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?a="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?
a="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(c=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(c=!1));return{corsType:a,corsCookiesEnabled:c}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(a){p.registerRequest(C.createQueuedRequest(a));return!0},createQueuedRequest:function(a){var c=p,f,h=a.callback,b="img",d;if(!t.isEmptyObject(u)){var g,
e,k;for(g in u)if(u.hasOwnProperty(g)&&(e=u[g],!(null==e||""===e)&&g in a&&!(e in a)&&!(e in p.reservedKeys)))k=a[g],null==k||""===k||(a[e]=k)}t.isValidPdata(a.sids)||(a.sids=[]);t.isValidPdata(a.pdata)||(a.pdata=[]);t.isValidLogdata(a.logdata)||(a.logdata={});a.logdataArray=s.convertObjectToKeyValuePairs(a.logdata,"\x3d",!0);a.logdataArray.push("_ts\x3d"+(new Date).getTime());"function"!==typeof h&&(h=this.defaultCallback);c.useJSONP=!0!==a.useImageRequest;c.useJSONP&&(b="script",f=c.callbackPrefix+
"_"+l+"_"+(new Date).getTime());c=this.makeRequestSrcData(a,f);if(!P&&(d=this.getCORSInstance())&&c.truncated&&(this.corsMetadata.corsCookiesEnabled||c.isDeclaredIdCall))b="cors";return{tag:b,src:c.src,corsSrc:c.corsSrc,internalCallbackName:f,callbackFn:h,postCallbackFn:a.postCallbackFn,useImageRequest:!!a.useImageRequest,requestData:a,corsInstance:d,corsPostData:c.corsPostData,hasCORSError:!1}},defaultCallback:function(a,c){var f,h,b,d,g,e,k,l,m;if((f=a.stuff)&&f instanceof Array&&(h=f.length))for(b=
0;b<h;b++)if((d=f[b])&&d===Object(d)){g=d.cn;e=d.cv;k=d.ttl;if("undefined"===typeof k||""===k)k=Math.floor(s.getMaxCookieExpiresInMinutes()/60/24);l=d.dmn||"."+document.domain.replace(/^www\./,"");m=d.type;if(g&&(e||"number"===typeof e))"var"!==m&&(k=parseInt(k,10))&&!isNaN(k)&&s.setCookie(g,e,1440*k,"/",l,!1),H.stuffed[g]=e}f=a.uuid;if(t.isPopulatedString(f)&&!t.isEmptyObject(v)){h=v.path;if("string"!==typeof h||!h.length)h="/";b=parseInt(v.days,10);isNaN(b)&&(b=100);s.setCookie(v.name||"aam_did",
f,1440*b,h,v.domain||"."+document.domain.replace(/^www\./,""),!0===v.secure)}!x&&!p.abortRequests&&z.requestToProcess(a,c)},makeRequestSrcData:function(a,c){a.sids=t.removeEmptyArrayValues(a.sids||[]);a.pdata=t.removeEmptyArrayValues(a.pdata||[]);var f=p,h=f.platformParams,b=s.encodeAndBuildRequest(a.sids,","),d=s.encodeAndBuildRequest(a.pdata,","),g=(a.logdataArray||[]).join("\x26");delete a.logdataArray;var e=A.IS_HTTPS?"https://":"http://",m=f.declaredId.getDeclaredIdQueryString(),v=f.adms.instance?
f.adms.getCustomerIDsQueryString(f.adms.getCustomerIDs()):"",q;q=[];var n,r,u,w;for(n in a)if(!(n in f.reservedKeys)&&a.hasOwnProperty(n))if(r=a[n],n=encodeURIComponent(n),r instanceof Array){u=0;for(w=r.length;u<w;u++)q.push(n+"\x3d"+encodeURIComponent(r[u]))}else q.push(n+"\x3d"+encodeURIComponent(r));q=q.length?"\x26"+q.join("\x26"):"";n=!1;b="d_nsid\x3d"+h.d_nsid+m+v+(b.length?"\x26d_sid\x3d"+b:"")+(d.length?"\x26d_px\x3d"+d:"")+(g.length?"\x26d_ld\x3d"+encodeURIComponent(g):"");h="\x26d_rtbd\x3d"+
h.d_rtbd+"\x26d_jsonv\x3d"+h.d_jsonv+"\x26d_dst\x3d"+h.d_dst;e=e+k+".demdex.net/event";d=f=e+"?"+b+(f.useJSONP?h+"\x26d_cb\x3d"+(c||""):"")+q;2048<f.length&&(f=f.substring(0,f.lastIndexOf("\x26")),n=!0);return{corsSrc:e+"?"+(O?"testcors\x3d1\x26d_nsid\x3d"+l+"\x26":"")+"_ts\x3d"+(new Date).getTime(),src:f,originalSrc:d,truncated:n,corsPostData:b+h+q,isDeclaredIdCall:""!==m}},fireRequest:function(a){if("img"===a.tag)this.fireImage(a);else{var c=p.declaredId,c=c.declaredId.request||c.declaredId.init||
{},c={dpid:c.dpid||"",dpuuid:c.dpuuid||""};"script"===a.tag?this.fireScript(a,c):"cors"===a.tag&&this.fireCORS(a,c)}},fireImage:function(a){var c=p,f,h;c.abortRequests||(c.firing=!0,f=new Image(0,0),c.sent.push(a),f.onload=function(){c.firing=!1;c.fired.push(a);c.num_of_img_responses++;c.registerRequest()},h=function(f){d="imgAbortOrErrorHandler received the event of type "+f.type;g.push(d);c.abortRequests=!0;c.firing=!1;c.errored.push(a);c.num_of_img_errors++;c.registerRequest()},f.addEventListener?
(f.addEventListener("error",h,!1),f.addEventListener("abort",h,!1)):f.attachEvent&&(f.attachEvent("onerror",h),f.attachEvent("onabort",h)),f.src=a.src)},fireScript:function(a,c){var f=this,h=p,b,e,l=a.src,m=a.postCallbackFn,q="function"===typeof m,n=a.internalCallbackName;h.abortRequests||(h.firing=!0,window[n]=function(f){try{f!==Object(f)&&(f={});D&&(z.ibsDeleted.push(f.ibs),delete f.ibs);var b=a.callbackFn;h.firing=!1;h.fired.push(a);h.num_of_jsonp_responses++;b(f,c);q&&m(f,c)}catch(l){l.message=
"DIL jsonp callback caught error with message "+l.message;d=l.message;g.push(d);l.filename=l.filename||"dil.js";l.partner=k;DIL.errorModule.handleError(l);try{b({error:l.name+"|"+l.message},c),q&&m({error:l.name+"|"+l.message},c)}catch(V){}}finally{h.requestRemoval({script:e,callbackName:n}),h.registerRequest()}},L?(h.firing=!1,h.requestRemoval({script:"no script created",callbackName:n})):(e=document.createElement("script"),e.addEventListener&&e.addEventListener("error",function(c){h.requestRemoval({script:e,
callbackName:n});d="jsonp script tag error listener received the event of type "+c.type+" with src "+l;f.handleScriptError(d,a)},!1),e.type="text/javascript",e.src=l,b=DIL.variables.scriptNodeList[0],b.parentNode.insertBefore(e,b)),h.sent.push(a),h.declaredId.declaredId.request=null)},fireCORS:function(a,c){function f(f){var e;try{if(e=JSON.parse(f),e!==Object(e)){h.handleCORSError(a,c,"Response is not JSON");return}}catch(l){h.handleCORSError(a,c,"Error parsing response as JSON");return}try{var m=
a.callbackFn;b.firing=!1;b.fired.push(a);b.num_of_cors_responses++;m(e,c);v&&n(e,c)}catch(q){q.message="DIL handleCORSResponse caught error with message "+q.message;d=q.message;g.push(d);q.filename=q.filename||"dil.js";q.partner=k;DIL.errorModule.handleError(q);try{m({error:q.name+"|"+q.message},c),v&&n({error:q.name+"|"+q.message},c)}catch(y){}}finally{b.registerRequest()}}var h=this,b=p,e=this.corsMetadata.corsType,l=a.corsSrc,m=a.corsInstance,q=a.corsPostData,n=a.postCallbackFn,v="function"===
typeof n;if(!b.abortRequests){b.firing=!0;if(M)b.firing=!1;else try{m.open("post",l,!0),"XMLHttpRequest"===e?(m.withCredentials=!0,m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.onreadystatechange=function(){4===this.readyState&&(200===this.status?f(this.responseText):h.handleCORSError(a,c,"onreadystatechange"))}):"XDomainRequest"===e&&(m.onload=function(){f(this.responseText)}),m.onerror=function(){h.handleCORSError(a,c,"onerror")},m.ontimeout=function(){h.handleCORSError(a,
c,"ontimeout")},m.send(q)}catch(r){this.handleCORSError(a,c,"try-catch")}b.sent.push(a);b.declaredId.declaredId.request=null}},handleCORSError:function(a,c,f){a.hasCORSError||(a.hasCORSError=!0,p.num_of_cors_errors++,p.corsErrorSources.push(f),a.tag="script",this.fireScript(a,c))},handleScriptError:function(a,c){p.num_of_jsonp_errors++;this.handleRequestError(a,c)},handleRequestError:function(a,c){var f=p;g.push(a);f.abortRequests=!0;f.firing=!1;f.errored.push(c);f.registerRequest()}},t={isValidPdata:function(a){return a instanceof
Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var c in a)if(a.hasOwnProperty(c))return!1;return!0},removeEmptyArrayValues:function(a){for(var c=0,f=a.length,b,d=[],c=0;c<f;c++)b=a[c],"undefined"!==typeof b&&(null!==b&&""!==b)&&d.push(b);return d},isPopulatedString:function(a){return"string"===typeof a&&a.length}},s={addListener:function(){if(document.addEventListener)return function(a,
c,f){a.addEventListener(c,function(a){"function"===typeof f&&f(a)},!1)};if(document.attachEvent)return function(a,c,f){a.attachEvent("on"+c,function(a){"function"===typeof f&&f(a)})}}(),convertObjectToKeyValuePairs:function(a,c,f){var b=[],d,e;c||(c="\x3d");for(d in a)a.hasOwnProperty(d)&&(e=a[d],"undefined"!==typeof e&&(null!==e&&""!==e)&&b.push(d+c+(f?encodeURIComponent(e):e)));return b},encodeAndBuildRequest:function(a,c){return this.map(a,function(a){return encodeURIComponent(a)}).join(c)},map:function(a,
c){if(Array.prototype.map)return a.map(c);if(void 0===a||null===a)throw new TypeError;var b=Object(a),h=b.length>>>0;if("function"!==typeof c)throw new TypeError;for(var d=Array(h),e=0;e<h;e++)e in b&&(d[e]=c.call(c,b[e],e,b));return d},filter:function(a,c){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var b=Object(a),h=b.length>>>0;if("function"!==typeof c)throw new TypeError;for(var e=[],d=0;d<h;d++)if(d in b){var g=b[d];c.call(c,g,d,b)&&e.push(g)}return e}return a.filter(c)},
getCookie:function(a){a+="\x3d";var c=document.cookie.split(";"),b,h,d;b=0;for(h=c.length;b<h;b++){for(d=c[b];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return null},setCookie:function(a,c,b,d,e,g){var k=new Date;b&&(b*=6E4);document.cookie=a+"\x3d"+encodeURIComponent(c)+(b?";expires\x3d"+(new Date(k.getTime()+b)).toUTCString():"")+(d?";path\x3d"+d:"")+(e?";domain\x3d"+e:"")+(g?";secure":"")},extendArray:function(a,c){return a instanceof
Array&&c instanceof Array?(Array.prototype.push.apply(a,c),!0):!1},extendObject:function(a,c,b){var d;if(a===Object(a)&&c===Object(c)){for(d in c)if(c.hasOwnProperty(d)&&(t.isEmptyObject(b)||!(d in b)))a[d]=c[d];return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(A.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60}};"error"===k&&0===l&&s.addListener(window,"load",function(){DIL.windowLoaded=!0});var S=!1,F=function(){S||(S=!0,p.registerRequest(),U(),!x&&!p.abortRequests&&
z.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){x||setTimeout(function(){!N&&!p.firstRequestHasFired&&("function"===typeof G?I.afterResult(G).submit():I.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},T=document;"error"!==k&&(DIL.windowLoaded?F():"complete"!==T.readyState&&"loaded"!==T.readyState?s.addListener(window,"load",function(){DIL.windowLoaded=!0;F()}):(DIL.windowLoaded=!0,F()));p.declaredId.setDeclaredId(q,"init");p.processVisitorAPI();this.api=I;this.getStuffedVariable=
function(a){var b=H.stuffed[a];!b&&"number"!==typeof b&&(b=s.getCookie(a),!b&&"number"!==typeof b&&(b=""));return b};this.validators=t;this.helpers=s;this.constants=A;this.log=g;R&&(this.pendingRequest=r,this.requestController=p,this.setDestinationPublishingUrl=m,this.destinationPublishing=z,this.requestProcs=C,this.variables=H,this.callWindowLoadFunctions=F)},function(){var b=document,e;null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",e=function(){b.removeEventListener("DOMContentLoaded",
e,!1);b.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(b){var e;if(b===Object(b))for(e in b)b.hasOwnProperty(e)&&(this[e]=b[e])},DIL.extendStaticPropertiesAndMethods({version:"6.2",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(b){this.windowLoaded="function"===typeof b?!!b():"boolean"===typeof b?b:!0},create:function(b){try{return new DIL(b)}catch(e){return(new Image(0,
0)).src="http://error.demdex.net/event?d_nsid\x3d0\x26d_px\x3d14137\x26d_ld\x3dname%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(b,e,g){e=e+"$"+g;e in this.dils||(this.dils[e]=b)},getDil:function(b,e){var g;"string"!==typeof b&&(b="");e||(e=0);g=b+"$"+e;return g in this.dils?
this.dils[g]:Error("The DIL instance with partner \x3d "+b+" and containerNSID \x3d "+e+" was not found")},dexGetQSVars:function(b,e,g){e=this.getDil(e,g);return e instanceof this?e.getStuffedVariable(b):""},xd:{postMessage:function(b,e,g){var d=1;e&&(window.postMessage?g.postMessage(b,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):e&&(g.location=e.replace(/#.*$/,"")+"#"+ +new Date+d++ +"\x26"+b))}}}),DIL.errorModule=function(){var b=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),
e={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},g=!1;return{activate:function(){g=!0},handleError:function(d){if(!g)return"DIL error module has not been activated";d!==Object(d)&&(d={});var m=d.name?(d.name+"").toLowerCase():"",k=[];d={name:m,filename:d.filename?d.filename+"":"",partner:d.partner?d.partner+"":"no_partner",site:d.site?d.site+"":document.location.href,
message:d.message?d.message+"":""};k.push(m in e?e[m]:e.noerrortypedefined);b.api.pixels(k).logs(d).useImageRequest().submit();return"DIL error report sent"},pixelMap:e}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(b,e,g){var d="";e=e||"Error caught in DIL module/submodule: ";b===Object(b)?d=e+(b.message||"err has no message"):(d=e+"err is not a valid object",b={});b.message=d;g instanceof DIL&&(b.partner=g.api.getPartner());DIL.errorModule.handleError(b);return this.errorMessage=
d}}});
DIL.tools.getSearchReferrer=function(b,e){var g=DIL.getDil("error"),d=DIL.tools.decomposeURI(b||document.referrer),m="",k="",l={queryParam:"q"},m=g.helpers.filter([e===Object(e)?e:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(b){return!(!b.hasOwnProperty("hostPattern")||!d.hostname.match(b.hostPattern))}).shift();return!m?{valid:!1,name:"",keywords:""}:{valid:!0,name:d.hostname,keywords:(g.helpers.extendObject(l,m),
k=l.queryPattern?(m=(""+d.search).match(l.queryPattern))?m[1]:"":d.uriParams[l.queryParam],decodeURIComponent(k||"").replace(/\+|%20/g," "))}};
DIL.tools.decomposeURI=function(b){var e=DIL.getDil("error"),g=document.createElement("a");g.href=b||document.referrer;return{hash:g.hash,host:g.host.split(":").shift(),hostname:g.hostname,href:g.href,pathname:g.pathname.replace(/^\//,""),protocol:g.protocol,search:g.search,uriParams:function(b,g){e.helpers.map(g.split("\x26"),function(e){e=e.split("\x3d");b[e.shift()]=e.shift()});return b}({},g.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var b={},e=document.getElementsByTagName("meta"),g,d,m,k,l;g=0;for(m=arguments.length;g<m;g++)if(k=arguments[g],null!==k)for(d=0;d<e.length;d++)if(l=e[d],l.name===k){b[k]=l.content;break}return b};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(b,e,g,d){try{var m=this,k={name:"DIL Site Catalyst Module Error"},l=function(b){k.message=b;DIL.errorModule.handleError(k);return b};this.options=d===Object(d)?d:{};this.dil=null;if(e instanceof DIL)this.dil=e;else return l("dilInstance is not a valid instance of DIL");k.partner=e.api.getPartner();if(b!==Object(b))return l("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=b.m_DIL=
function(b){var d="function"===typeof b.m_i?b.m_i("DIL"):this;if(d!==Object(d))return l("m is not an object");d.trackVars=m.constructTrackVars(g);d.d=0;d.s=b;d._t=function(){var b,d,e=","+this.trackVars+",",g=this.s,k,u=[];k=[];var w={},x=!1;if(g!==Object(g))return l("Error in m._t function: s is not an object");if(this.d){if("function"===typeof g.foreachVar)g.foreachVar(function(b,d){"undefined"!==typeof d&&(w[b]=d,x=!0)},this.trackVars);else{if(!(g.va_t instanceof Array))return l("Error in m._t function: s.va_t is not an array");
if(g.lightProfileID)(b=g.lightTrackVars)&&(b=","+b+","+g.vl_mr+",");else if(g.pe||g.linkType)b=g.linkTrackVars,g.pe&&(d=g.pe.substring(0,1).toUpperCase()+g.pe.substring(1),g[d]&&(b=g[d].trackVars)),b&&(b=","+b+","+g.vl_l+","+g.vl_l2+",");if(b){d=0;for(u=b.split(",");d<u.length;d++)0<=e.indexOf(","+u[d]+",")&&k.push(u[d]);k.length&&(e=","+k.join(",")+",")}k=0;for(d=g.va_t.length;k<d;k++)b=g.va_t[k],0<=e.indexOf(","+b+",")&&("undefined"!==typeof g[b]&&null!==g[b]&&""!==g[b])&&(w[b]=g[b],x=!0)}m.includeContextData(g,
w).store_populated&&(x=!0);x&&this.d.api.signals(w,"c_").submit()}}};b.loadModule("DIL");b.DIL.d=e;return k.message?k.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(x){return this.handle(x,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(b){var e=[],g,d,m,k,l;if(b===Object(b)){g=b.names;if(g instanceof Array&&(m=g.length))for(d=0;d<m;d++)k=g[d],"string"===typeof k&&k.length&&e.push(k);b=b.iteratedNames;if(b instanceof Array&&
(m=b.length))for(d=0;d<m;d++)if(g=b[d],g===Object(g)&&(k=g.name,l=parseInt(g.maxIndex,10),"string"===typeof k&&k.length&&!isNaN(l)&&0<=l))for(g=0;g<=l;g++)e.push(k+g);if(e.length)return e.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(b,e){var g={},d=!1;if(b.contextData===Object(b.contextData)){var m=b.contextData,k=this.options.replaceContextDataPeriodsWith,
l=this.options.filterFromContextVariables,x={},w,u,v,n;if("string"!==typeof k||!k.length)k="_";if(l instanceof Array){w=0;for(u=l.length;w<u;w++)v=l[w],this.dil.validators.isPopulatedString(v)&&(x[v]=!0)}for(n in m)if(m.hasOwnProperty(n)&&!x[n]&&((l=m[n])||"number"===typeof l))n=("contextData."+n).replace(/\./g,k),e[n]=l,d=!0}g.store_populated=d;return g}};